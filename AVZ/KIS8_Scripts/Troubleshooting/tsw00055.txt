// $AVZ1581
//$ Таймаут, по истечению которого принимается решение о том, что процесс не отвечает, находится за пределами допустимых значений
// Функция поиска проблемы                                                                          
function Check : dword;
var
 X : integer;
begin
 Result := 0;
 // Проверка
 if RegKeyParamExists('HKLM', 'SYSTEM\CurrentControlSet\Control', 'HungAppTimeout') then begin
  X := StrToIntDef(RegKeyStrParamRead('HKLM', 'SYSTEM\CurrentControlSet\Control', 'HungAppTimeout'), 5000);
  if (X < 3000) or (X > 60000) then 
   Result := 2;
 end;
end;

// Функция исправления проблемы                                                                          
function Fix : dword;
begin
 Result := 0;
 RegKeyStrParamWrite('HKLM', 'SYSTEM\CurrentControlSet\Control', 'HungAppTimeout', '5000');
end;
